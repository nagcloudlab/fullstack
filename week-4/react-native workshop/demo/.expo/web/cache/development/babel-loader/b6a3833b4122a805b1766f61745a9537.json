{"ast":null,"code":"import { useContext } from \"react\";\nimport jwtDecode from \"jwt-decode\";\nimport AuthContext from \"./context\";\nimport authStorage from \"./storage\";\nexport default useAuth = function useAuth() {\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      setUser = _useContext.setUser;\n\n  var logIn = function logIn(authToken) {\n    var user = jwtDecode(authToken);\n    setUser(user);\n    authStorage.storeToken(authToken);\n  };\n\n  var logOut = function logOut() {\n    setUser(null);\n    authStorage.removeToken();\n  };\n\n  return {\n    user: user,\n    logIn: logIn,\n    logOut: logOut\n  };\n};","map":{"version":3,"sources":["/Users/nag/Desktop/fullstack/week-4/react-native workshop/demo/app/auth/useAuth.js"],"names":["useContext","jwtDecode","AuthContext","authStorage","useAuth","user","setUser","logIn","authToken","storeToken","logOut","removeToken"],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAOC,WAAP;AACA,OAAOC,WAAP;AAEA,eAAeC,OAAO,GAAG,mBAAM;AAAA,oBAEDJ,UAAU,CAACE,WAAD,CAFT;AAAA,MAEnBG,IAFmB,eAEnBA,IAFmB;AAAA,MAEbC,OAFa,eAEbA,OAFa;;AAI3B,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,SAAD,EAAe;AACzB,QAAMH,IAAI,GAAGJ,SAAS,CAACO,SAAD,CAAtB;AACAF,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAF,IAAAA,WAAW,CAACM,UAAZ,CAAuBD,SAAvB;AACH,GAJD;;AAMA,MAAME,MAAM,GAAG,SAATA,MAAS,GAAM;AACjBJ,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAH,IAAAA,WAAW,CAACQ,WAAZ;AACH,GAHD;;AAMA,SAAO;AAAEN,IAAAA,IAAI,EAAJA,IAAF;AAAQE,IAAAA,KAAK,EAALA,KAAR;AAAeG,IAAAA,MAAM,EAANA;AAAf,GAAP;AACH,CAjBD","sourcesContent":["import { useContext } from \"react\";\nimport jwtDecode from \"jwt-decode\";\n\nimport AuthContext from \"./context\";\nimport authStorage from \"./storage\";\n\nexport default useAuth = () => {\n\n    const { user, setUser } = useContext(AuthContext);\n\n    const logIn = (authToken) => {\n        const user = jwtDecode(authToken); // {name,email} ==> use claims\n        setUser(user);\n        authStorage.storeToken(authToken);\n    };\n\n    const logOut = () => {\n        setUser(null);\n        authStorage.removeToken();\n    };\n\n\n    return { user, logIn, logOut };\n};\n"]},"metadata":{},"sourceType":"module"}