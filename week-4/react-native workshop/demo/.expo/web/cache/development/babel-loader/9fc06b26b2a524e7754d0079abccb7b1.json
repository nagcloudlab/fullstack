{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { create } from 'apisauce';\nimport cache from \"../utility/cache\";\nvar apiClient = create({\n  baseURL: 'http://172.20.10.3:8080/api/'\n});\nvar get = apiClient.get;\n\napiClient.get = function _callee(url, params, axiosConfig) {\n  var response, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(get(url, params, axiosConfig));\n\n        case 2:\n          response = _context.sent;\n\n          if (!response.ok) {\n            _context.next = 6;\n            break;\n          }\n\n          cache.store(url, response.data);\n          return _context.abrupt(\"return\", response);\n\n        case 6:\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(cache.get(url));\n\n        case 8:\n          data = _context.sent;\n          return _context.abrupt(\"return\", data ? {\n            ok: true,\n            data: data\n          } : response);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default apiClient;","map":{"version":3,"sources":["/Users/nag/Desktop/fullstack/week-4/react-native workshop/demo/app/api/client.js"],"names":["create","cache","apiClient","baseURL","get","url","params","axiosConfig","response","ok","store","data"],"mappings":";AACA,SAASA,MAAT,QAAuB,UAAvB;AACA,OAAOC,KAAP;AAGA,IAAMC,SAAS,GAAGF,MAAM,CAAC;AACrBG,EAAAA,OAAO,EAAE;AADY,CAAD,CAAxB;AAIA,IAAMC,GAAG,GAAGF,SAAS,CAACE,GAAtB;;AAGAF,SAAS,CAACE,GAAV,GAAgB,iBAAOC,GAAP,EAAYC,MAAZ,EAAoBC,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACWH,GAAG,CAACC,GAAD,EAAMC,MAAN,EAAcC,WAAd,CADd;;AAAA;AACNC,UAAAA,QADM;;AAAA,eAERA,QAAQ,CAACC,EAFD;AAAA;AAAA;AAAA;;AAGRR,UAAAA,KAAK,CAACS,KAAN,CAAYL,GAAZ,EAAiBG,QAAQ,CAACG,IAA1B;AAHQ,2CAIDH,QAJC;;AAAA;AAAA;AAAA,2CAMOP,KAAK,CAACG,GAAN,CAAUC,GAAV,CANP;;AAAA;AAMNM,UAAAA,IANM;AAAA,2CAOLA,IAAI,GAAG;AAAEF,YAAAA,EAAE,EAAE,IAAN;AAAYE,YAAAA,IAAI,EAAJA;AAAZ,WAAH,GAAwBH,QAPvB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;;AAYA,eAAeN,SAAf","sourcesContent":["\nimport { create } from 'apisauce'\nimport cache from \"../utility/cache\";\n\n\nconst apiClient = create({\n    baseURL: 'http://172.20.10.3:8080/api/'\n})\n\nconst get = apiClient.get; // orignal apisauce get method reference\n\n// proxy / around-execute pattern\napiClient.get = async (url, params, axiosConfig) => {\n    const response = await get(url, params, axiosConfig);\n    if (response.ok) {\n        cache.store(url, response.data); // cache\n        return response;\n    }\n    const data = await cache.get(url);\n    return data ? { ok: true, data } : response;\n};\n\n\n\nexport default apiClient"]},"metadata":{},"sourceType":"module"}